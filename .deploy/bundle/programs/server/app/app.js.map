{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/schemas/articles-schema.js","meteor://ðŸ’»app/lib/collections/articles-collection.js","meteor://ðŸ’»app/lib/controllers/article-update.js","meteor://ðŸ’»app/lib/controllers/base.js","meteor://ðŸ’»app/lib/controllers/homepage.js","meteor://ðŸ’»app/lib/controllers/new-article.js","meteor://ðŸ’»app/lib/controllers/section.js","meteor://ðŸ’»app/lib/controllers/single-article.js","meteor://ðŸ’»app/lib/controllers/user-list.js","meteor://ðŸ’»app/lib/controllers/user-login.js","meteor://ðŸ’»app/lib/controllers/user-profile.js","meteor://ðŸ’»app/lib/router.js","meteor://ðŸ’»app/server/methods/article-methods.js","meteor://ðŸ’»app/server/methods/user-methods.js","meteor://ðŸ’»app/server/publications/article-publications.js","meteor://ðŸ’»app/server/publications/user-publications.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["var articleFields = {\n  title: {\n    type: String,\n    label: 'Title',\n    optional: false\n  },\n  section: {\n    type: String,\n    label: 'Section',\n    autoform: {\n      type: 'select',\n      options: [\n        {label: 'Comics', value: \"comics\"},\n        {label: 'Movies', value: \"movies\"},\n        {label: 'TV', value: \"tv\"},\n        {label: 'Games', value: \"games\"},\n        {label: 'Collectibles', value: \"collectibles\"}\n      ]\n    },\n    optional: false\n  },\n  primaryAsset: {\n    type: String,\n    label: 'Primary Asset',\n    optional: false,\n    autoform : {\n      type: 'textarea',\n      rows: 15,\n      class: 'primary-asset'\n    }\n  },\n  author: {\n    type: String,\n    optional: false\n  },\n  body: {\n    type: String,\n    label: 'Body',\n    autoform: {\n      type: 'textarea',\n      rows: 25,\n      class: 'body'\n    },\n    optional: false\n  },\n  tags: {\n    type: String,\n    label: 'Tags (For Google)',\n    optional: false\n  },\n  _id: {\n    type: String,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  },\n  userId: {\n    type: String,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  },\n  createdAt: {\n    type: Date,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n};\n\nArticleSchema = new SimpleSchema(articleFields);","Articles = new Mongo.Collection('articles');\nArticles.attachSchema(ArticleSchema);\nArticles.allow({\n  update: function (userId, doc, fields, modifier) {\n    if (userId && doc.userId === userId) {\n      return true;\n    }\n  },\n  remove: function (userId, doc) {\n    // can only remove your own documents\n    if (userId && doc.userId === userId) {\n      return true\n    }\n  }\n});\nArticles.deny({\n  update: function (userId, doc, fields, modifier) {\n    if (_.contains(fields, \"createdAt\") || _.contains(fields, \"userId\")) {\n      return true;\n    }\n  },\n  remove: function (userId, doc) {\n    // can't remove locked documents\n    return doc.locked;\n  }\n});","ArticleUpdateController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'articleUpdate',\n\tonBeforeAction: function() {\n\t\t$('body').addClass('admin');\n        var user = Meteor.user();\n        if (user) {\n\t\t\tif (Meteor.user().username == \"joebiggs\" || Meteor.user().username == \"richrich\") {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.render('notFound');\n\t\t\t}\n        } else {\n        \tthis.render('notFound');\n        }\n\t},\n\tonStop: function() {\n        $('body').removeClass('admin');\n    },\n\twaitOn: function() {\n\t\treturn Meteor.subscribe('singleArticle', this.params._id);\n\t},\n\tdata: function() {\n\t\treturn { article: Articles.findOne(this.params._id) };\n\t}\n});","BaseController = RouteController.extend({\n  \tlayoutTemplate: 'mainLayout'\n});","HomepageController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'homepage',\n\tfindOptions: function() {\n\t\treturn { sort: { createdAt: -1 } };\n\t},\n\twaitOn: function() {\n\t\treturn Meteor.subscribe('allArticles', this.findOptions());\n\t},\n\tdata: function() {\n\t\treturn { articles: Articles.find({}, { sort: { createdAt: -1 } }) };\n\t}\n});","NewArticleController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'newArticle',\n\tonBeforeAction: function() {\n\t\t$('body').addClass('admin');\n        var user = Meteor.user();\n        if (user) {\n\t\t\tif (Meteor.user().username == \"joebiggs\" || Meteor.user().username == \"richrich\") {\n\t\t\t\tthis.next();\n\t\t\t} else {\n\t\t\t\tthis.render('notFound');\n\t\t\t}\n        } else {\n        \tthis.render('notFound');\n        }\n\t},\n\tonStop: function() {\n        $('body').removeClass('admin');\n    }\n});","SectionController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: \"sectionArticlesPage\",\n    onBeforeAction: function() {\n        Session.set(\"querySection\", this.params.section);\n        this.next();\n    },\n    data: function(){\n        var section = this.params.section;\n        var articles = Meteor.subscribe(\"sectionArticles\", section);\n        return {\n            articles: Articles.find({}, { sort: { createdAt: -1 } })\n        }\n    }\n});","SingleArticleController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'articlePage',\n\tonBeforeAction: function() {\n\t\t$('body').addClass('article');\n\t\tthis.next();\n\t},\n\tonStop: function() {\n\t\t$('body').removeClass('article');\n\t},\n\twaitOn: function() {\n\t\treturn Meteor.subscribe('singleArticle', this.params._id);\n\t},\n\tdata: function() {\n\t\treturn Articles.findOne(this.params._id);\n\t}\n});","UserListController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'userList',\n\tonBeforeAction: function() {\n        $('body').addClass('admin');\n        this.next();\n\t},\n    onStop: function() {\n        $('body').removeClass('admin');\n    },\n\twaitOn: function() {\n\t\treturn Meteor.subscribe('userList');\n\t},\n\tdata: function() {\n\t\treturn { users: Meteor.users.find() };\n\t}\n});","UserLoginController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: 'userLogin'\n});","UserProfileController = RouteController.extend({\n\tlayoutTemplate: 'mainLayout',\n\ttemplate: \"userPage\",\n\tonBeforeAction: function() {\n        $('body').addClass('admin');\n\t\tvar username = Router.current().params.username;\n        var user = Meteor.users.findOne({username:username});\n        if (user) {\n        \tif (Meteor.user()) {\n\t\t\t\tif (Meteor.user().username == \"joebiggs\" || Meteor.user().username == \"richrich\") {\n\t\t\t\t\tthis.next();\n\t\t\t\t} else {\n\t\t\t\t\tthis.render('notFound');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.render('notFound');\n\t\t\t}\n        } else {\n        \tthis.render('notFound');\n        }\n        Session.set(\"queryUsername\", username);\n\t},\n    onStop: function() {\n        $('body').removeClass('admin');\n    },\n\twaitOn: function(){\n        return Meteor.subscribe(\"userProfile\",this.params.username);\n    },\n    data: function(){\n        var username = Router.current().params.username;\n        var user = Meteor.users.findOne({username:username});\n        var articles = Meteor.subscribe(\"userArticlesList\",username);\n        return {\n        \tuserObject: user,\n        \tarticles: Articles.find({}, { sort: { createdAt: -1 } })\n        }\n    }\n});","Router.configure({\n\tloadingTemplate: 'spinner',\n\tnotFoundTemplate: 'notFound'\n});\n\nRouter.route('/', {\n\tname: 'root',\n\tcontroller: 'HomepageController'\n});\n\nRouter.route('/article/:title/id:_id', {\n\tname: 'singleArticle',\n\tcontroller: 'SingleArticleController'\n});\n\nRouter.route('/section/:section', {\n\tname: 'sectionArticles',\n\tcontroller: 'SectionController'\n});\n\nRouter.route('admin/batcave/login', {\n\tname: 'userLogin',\n\tcontroller: 'UserLoginController'\n});\nRouter.route('admin/batcave/new', {\n\tname: 'newArticle',\n\tcontroller: 'NewArticleController'\n});\n\nRouter.route('admin/batcave/users', {\n\tname: 'userList',\n\tcontroller: 'UserListController'\n});\n\nRouter.route('admin/batcave/users/:username', {\n\tname: 'userPage',\n\tcontroller: 'UserProfileController'\n});\n\nRouter.route('admin/batcave/users/:username/article/id:_id', {\n\tname: 'articleUpdate',\n\tcontroller: 'ArticleUpdateController'\n});","Meteor.methods({\n  submitArticle: function(article) {\n  \tvar user = Meteor.user();\n  \tif (!user)\n  \t\tthrow new Meteor.Error(401, 'You need to log in first');\n\n    var additionalParams = {\n      createdAt: new Date(),\n      userId: user._id\n    }\n\n    _.extend(article, additionalParams);\n    article._id = Articles.insert(article);\n\n    return article;\n  },\n  updateArticle: function(id) {\n    var article = Articles.find(id);\n    return article;\n  }\n});","Meteor.methods({\n\tisAdmin: function() {\n\t\tif (Meteor.user()) {\n\t\t\tif (Meteor.user().username == \"joebiggs\" || Meteor.user().username == \"richrich\") {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tcheckUserExists: function(username) {\n\t\tvar userFind = Meteor.users.findOne({username:username});\n\t\t if (userFind) {\n\t\t \treturn true;\n\t\t } else {\n\t\t \tconsole.log('User Already Exists');\n\t\t }\n\t},\n\tgetUserId: function(username) {\n\t\tvar user = Meteor.users.findOne({username:username});\n\t\tvar userId = user._id;\n\t\treturn userId;\n\t}\n});","Meteor.publish('allArticles', function() {\n\treturn Articles.find();\n});\n\nMeteor.publish('singleArticle', function(id) {\n\treturn Articles.find(id);\n});\n\nMeteor.publish('sectionArticles', function(section) {\n\treturn Articles.find({section: section});\n});\n","Meteor.publish(\"userProfile\", function(username) {\n\tvar user = Meteor.users.findOne({username:username});\n\n\tif (!user) {\n\t\tthis.ready();\n\t\treturn;\n\t}\n\n\tif (this.userId == user._id) {\n\t\treturn Meteor.users.find(this.userId);\n\t} else {\n\t\treturn Meteor.users.find(user._id);\n\t\t// return Meteor.users.find(user._id, {\n\t\t// \tfields: {\n\t\t// \t\t\"profile\": 0\n\t\t// \t}\n\t\t// });\n\t}\n});\n\nMeteor.publish('userList', function() {\n\treturn Meteor.users.find();\n});\n\nMeteor.publish('userArticlesList', function(username) {\n\tvar user = Meteor.users.findOne({username:username});\n\treturn Articles.find({userId: user._id});\n});"]}